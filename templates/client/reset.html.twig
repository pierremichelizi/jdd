{% extends 'client/base.html.twig' %}

{% block title %}AdmissionFacile | {{"Obtener votre admission sans perdre du temps"|trans}}{% endblock %}

{% block body %}

<div class="mt-4">

    <div class="row">
        <div class=" col-12 col-sm-9 col-md-7 col-lg-5 mx-auto px-4">
            <div class=" card  p-4 p-xl-5" style="border-radius: 20px;">
                <h5>{{t("Réinitialiser ")}}</h5>
                <p>{{t("Réinitialisation de mot de passe ")}}</p>
                <div>
                    <div class="form-element">
                        <div class="row">
                            <div class="contact-form">
                                <div class="form-error hidden">
                                    <div class="alert alert-danger">

                                    </div>
                                </div>
                                <form class="form">
                                    <div class="form-element">
                                        <div class="row ">
                                            <div class="col-12  mt-4">
                                                <i class="fa-solid fa-lock"></i>
                                                <input type="password" name="password" placeholder="{{t("Mot de passe")}}" required="">
                                            </div>
                                            <div class="col-12 mt-4">
                                                <i class="fa-solid fa-lock"></i>
                                                <input type="password" name="new-password" placeholder="{{t("Répéter le mot de passe")}}" required="">
                                            </div>
                                            <input type="hidden" name="csrf_token" value="{{csrf_token}}">
                                            <div class="col-12 mt-5">
                                                <button class="btn-common btn-active w-100">{{t("Réinitialiser")}}</button>
                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <p class="text-center mt-4">

                        <a href="/Connexion">
                            {{t('Vous ne souhaitez plus réinitialiser ? ')}} <br /></br.>
                            {{"Connectez-Vous"}}</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="instructors-wrapper single-page-section-bottom-space">


</div>
<script>
    document.addEventListener("DOMContentLoaded", (e) => {
        $("form.form").on("submit", (e) => {
            e.preventDefault();
            if(document.querySelector(".form-error .alert"))document.querySelector(".form-error .alert").innerHTML=""
                if(!document.querySelector(".form-error")?.classList.contains("hidden")) document.querySelector(".form-error")?.classList.add("hidden");
            submitForm("form.form", "/auth/reset/pwd", (d) => {
                if (document.querySelector(".form-error") && !document.querySelector(".form-error")?.classList.contains("hidden")) document.querySelector(".form-error")?.classList.add("hidden");
                console.log(d.redirectTo)
                window.location.href=d.redirectTo ?? "/";
            }, (name) => {
                
                if (name == "form" && document.querySelector(".form-error")) {
                    document.querySelector(".form-error")?.classList.remove("hidden");
                    return document.querySelector(".form-error .alert")
                }
            }, )

        })

    })
</script>
{% endblock %}